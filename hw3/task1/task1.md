## Задание 1. Анализ состояний TCP-соединений.

### Запуск Python HTTP сервера на порту 8080

Для запуска http сервера на порту 8080 была выполнена команда:

```shell
python3 -m http.server 8080
```

Вывод команды:

```
Serving HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...

```

### Поиск сокета HTTP сервера.

Для того чтобы найти сокет поднятого сервера, воспользуемся утилитой `ss` в новом терминале, чтобы не прерывать работу сервера:

```shell
ss -ltnp | grep 8080
```

Вывод команды:

```
LISTEN 0      5                 0.0.0.0:8080       0.0.0.0:*    users:(("python3",pid=36340,fd=3))
```

Выполним запрос к серверу с помощью `curl`:

```shell
curl http://localhost:8080
```

Ответ сервера:

```html
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Directory listing for /</title>
</head>
<body>
<h1>Directory listing for /</h1>
<hr>
<ul>
<li><a href=".git/">.git/</a></li>
<li><a href=".idea/">.idea/</a></li>
<li><a href="hw1/">hw1/</a></li>
<li><a href="hw2/">hw2/</a></li>
<li><a href="hw3/">hw3/</a></li>
<li><a href="README.md">README.md</a></li>
</ul>
<hr>
</body>
</html>
```

Сервер выслал список путей в директории, в котором он был запущен. Рассмотрим состояния TCP-сокетов для порта 8080 после запроса:

```shell
ss -tan | grep 8080
```

Вывод команды:

```
LISTEN     0      5                 0.0.0.0:8080             0.0.0.0:*           
TIME-WAIT  0      0               127.0.0.1:8080           127.0.0.1:48838 
```

Видно, что после выполнения запроса появился сокет в состоянии `TIME-WAIT`. Он необходим для того, чтобы новые подключения к серверу не
направлялись на порт сокета и не воспринимались как следующая часть предыдущего соединения. Удалить его мы не можем, но спустя некоторое время
(мониторинг через утилиту `watch`) этот сокет исчезает.

Большое количество TIME-WAIT сокетов приведет к тому, что не останется свободных портов для принятия новых запросов и они будут
ждать освобождения порта, что приведет к росту сетевой задержки.